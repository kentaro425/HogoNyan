<%= render 'public/posts/header' %>
<div class="container">
  <div class="row">
    <div class="col-3 offset-2">
      <%= @user.sns_image %>
    </div>
    <div class="col-5">
      <div class="row">
        <div class="col-6 pl-0">
          <%= @user.nickname %>
        </div>
        <div class="col-6">
          <% if user_signed_in? %>
            <% if @user.id == current_user.id %>
              <%= link_to "プロフィールを編集", sns_edit_user_path(@user), class: "btn btn-outline-secondary btn-sm" %>
            <% elsif current_user.following?(@user) %>
              <%= link_to "フォロー外す", user_relationships_path(@user.id), method: :delete %>
            <% else %>
              <%= link_to "フォローする", user_relationships_path(@user.id), method: :post %>
            <% end %>
          <% else %>
          <% end %>
        </div>
      </div>
      <div class="row mt-3">
        <div class="mr-4">
          投稿 <%= @user.posts.count %> 件
        </div>
        <div class="mr-4">
          <%= link_to  followers_user_relationships_path(@user) do %>
            フォロワー <%= @user.followers.count %> 人
          <% end %>
        </div>
        <div>
          <%= link_to  followings_user_relationships_path(@user) do %>
            フォロー中 <%= @user.followings.count %> 人
          <% end %>
        </div>
      </div>
      <div class="row mt-3">
        <%= @user.profile %>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-8 mx-auto">
      <% @user.posts.each do |post| %>
        <div class="col-4">
          <%= link_to sns_home_user_path(@user) do %>
            <% if post.post_images.count > 0 %>
              <%= image_tag post.post_images.first, class: "img-fluid" %>
            <% end %>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>